@startuml
!include style.puml
skinparam arrowColor #BLACK
skinparam noteTextAlignment left

Title: Family component command handling

participant ":XYZCommand" as Command COMMAND_COLOR

box
participant ":Family" as Family MODEL_COLOR
participant "parents:PersonList" as Parents MODEL_COLOR_T1
participant "myGen:PersonList" as MyGen MODEL_COLOR_T1
participant "children:PersonList" as Children MODEL_COLOR_T1
participant "Alice:Person" as Person MODEL_COLOR_T2
end box

participant ":System" as System LOGIC_COLOR
participant ":MoneyList" as Money MONEY_COLOR
participant ":UI" as UI UI_COLOR

-> Command: add /n Alice /g 1
activate Command
Command -> Family: addPerson()
activate Family
Family -> Family: getList()
activate Family
Family <- Family: :PersonList
deactivate Family
Family -> Parents: addPerson()
activate Parents
create Person
Parents -> Person: Person()
activate Person
create Money
Person -> Money: MoneyList()
activate Money
Person <- Money
deactivate Money
Parents <- Person
deactivate Person
Family <- Parents
deactivate Parents
opt Not Silent
    Family -> Family: getGenerationName()
    activate Family
    Family <- Family: generation: String
    deactivate Family
    Family -> Family: printPersonAdded()
    activate Family
    Family -> System: println()
    activate System
    Family <- System
    Family <- Family
    deactivate System
    deactivate Family
end opt
Command <- Family
deactivate Family
<- Command
deactivate Command

-> Command: addin /g 1 /u 1 /i ...
activate Command
Command -> Family: addIncome()
activate Family
Family -> Parents: addIncome()
activate Parents
Parents -> Person: addIncome()
activate Person
Person -> Money: addIncome()
activate Money
Person <- Money
deactivate Money
opt Not Silent
    Person -> UI: formatValue()
    activate UI
    Person <- UI: income:String
    deactivate UI
    Person -> System: println()
    activate System
    Person <- System
    deactivate System
end opt
Parents <- Person
deactivate Person
Family <- Parents
deactivate Parents
Command <- Family
deactivate Family
<- Command
deactivate Command

-> Command: list /g 1
activate Command
Command -> Family: list()
activate Family
Family -> Family: getGenerationName()
activate Family
Family <- Family: generation:String
deactivate Family
Family -> System: println()
activate System
Family <- System
deactivate System
Family -> Family: getList()
activate Family
Family <- Family: personList:PersonList
deactivate Family
Family -> Parents: list()
activate Parents
loop for every Person
    Parents -> Parents: getPerson()
    activate Parents
    Parents <- Parents:
    deactivate Parents
    Parents -> System: println()
    activate System
    Parents <- System
    deactivate System
    Parents -> Person: listIncome()
    activate Person
    Person -> Money: printIncomeList()
    activate Money
    Person <- Money
    deactivate Money
    Parents <- Person
    deactivate Person
        Parents -> Person: listExpenditure()
        activate Person
        Person -> Money: printExpenditureList()
        activate Money
        Person <- Money
        deactivate Money
        Parents <- Person
        deactivate Person
        Parents -> System: println()
        activate System
        Parents <- System
        deactivate System
end loop
Family <- Parents
deactivate Parents
Command <- Family
deactivate Family
<- Command
deactivate Command

@enduml
